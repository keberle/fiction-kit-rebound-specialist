/* EPUB Dark Mode Compatible CSS
 * This stylesheet uses prefers-color-scheme media queries for proper dark mode support
 * Based on W3C recommendations and EPUB3 best practices
 */

/* Color scheme declaration - signals to readers we support both modes */
:root {
    color-scheme: light dark;
}

/* Default (Light Mode) Colors */
body, html {
    background-color: #ffffff;
    color: #000000;
}

/* Dark Mode Colors using media query */
@media (prefers-color-scheme: dark) {
    body, html {
        background-color: #1a1a1a;
        color: #e0e0e0;
    }
    
    /* All text elements get readable light text on dark background */
    p, div, span, h1, h2, h3, h4, h5, h6, li, td, th, blockquote {
        color: #e0e0e0;
    }
    
    /* Links in dark mode */
    a, a:link {
        color: #6db3f2;
    }
    
    a:visited {
        color: #b392f0;
    }
    
    a:hover, a:active {
        color: #8ecafe;
    }
    
    /* Code blocks in dark mode */
    code, pre {
        background-color: #2d2d2d;
        color: #e0e0e0;
        border: 1px solid #444;
    }
    
    /* Tables in dark mode */
    table {
        border-color: #444;
    }
    
    td, th {
        border-color: #444;
        color: #e0e0e0;
    }
    
    /* Scene breaks and separators in dark mode */
    hr {
        border-color: #666;
        opacity: 0.5;
    }
}

/* Light mode explicit styles */
@media (prefers-color-scheme: light) {
    body, html {
        background-color: #ffffff;
        color: #000000;
    }
    
    p, div, span, h1, h2, h3, h4, h5, h6, li, td, th, blockquote {
        color: #000000;
    }
    
    a, a:link {
        color: #0066cc;
    }
    
    a:visited {
        color: #551a8b;
    }
    
    code, pre {
        background-color: #f5f5f5;
        color: #000000;
        border: 1px solid #ddd;
    }
}

/* Universal styles that work in both modes */
body {
    font-family: serif;
    font-size: 1em;
    line-height: 1.6;
    margin: 1.5em;
    padding: 0;
    max-width: 100%;
}

/* Typography */
h1, h2 {
    page-break-before: always;
    page-break-after: avoid;
    font-weight: bold;
    margin-top: 1.5em;
    margin-bottom: 1em;
    line-height: 1.3;
}

h1 {
    font-size: 2em;
}

h2 {
    font-size: 1.5em;
}

p {
    margin: 0 0 1em 0;
    text-indent: 1em;
    line-height: 1.6;
}

/* First paragraph after heading - no indent */
h1 + p, h2 + p, h3 + p {
    text-indent: 0;
}

/* Scene breaks */
.scene-break {
    text-align: center;
    margin: 2em 0;
}

hr {
    margin: 2em auto;
    width: 50%;
}

/* Emphasis */
em, i {
    font-style: italic;
}

strong, b {
    font-weight: bold;
}

/* Code blocks */
code, pre {
    font-family: monospace;
    padding: 0.2em 0.4em;
    border-radius: 3px;
}

pre {
    padding: 1em;
    overflow-x: auto;
}

/* Images */
img {
    max-width: 100%;
    height: auto;
}
